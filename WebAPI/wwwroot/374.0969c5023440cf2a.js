"use strict";(self.webpackChunkAccountOwnerClient=self.webpackChunkAccountOwnerClient||[]).push([[374],{3374:(N,f,m)=>{m.r(f),m.d(f,{AuthenticationModule:()=>q});var c=m(6895),d=m(8252),o=m(4006),r=m(4650),p=m(7361);let h=(()=>{class e{constructor(){this.validateConfirmPassword=i=>t=>{const u=t.value;if(""!==u)return u!==i.value?{mustMatch:!0}:null}}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function v(e,s){if(1&e&&(r.TgZ(0,"div",20),r._UZ(1,"span",21),r.qZA()),2&e){const i=r.oxw();r.xp6(1),r.Q6J("innerHTML",i.errorMessage,r.oJD)}}function Z(e,s){1&e&&(r.TgZ(0,"em"),r._uU(1,"2"),r.qZA())}function w(e,s){1&e&&(r.TgZ(0,"em"),r._uU(1,"1"),r.qZA())}function C(e,s){1&e&&(r.TgZ(0,"em"),r._uU(1,"Passwords must match"),r.qZA())}let U=(()=>{class e{constructor(i,t,u){this.authService=i,this.passConfValidator=t,this.router=u,this.errorMessage="",this.validateControl=n=>this.registerForm.get(n).invalid&&this.registerForm.get(n).touched,this.hasError=(n,a)=>this.registerForm.get(n).hasError(a),this.registerUser=n=>{this.showError=!1;const a={...n};this.authService.registerUser("api/Accounts/Registration",{firstName:a.firstName,lastName:a.lastName,email:a.email,password:a.password,confirmPassword:a.confirm}).subscribe({next:l=>this.router.navigate(["/authentication/login"]),error:l=>{this.errorMessage=l.message,this.showError=!0}}),this.authService.logout()}}ngOnInit(){this.registerForm=new o.cw({firstName:new o.NI("",[o.kI.required]),lastName:new o.NI(""),email:new o.NI(""),password:new o.NI("",[o.kI.required]),confirm:new o.NI("")}),this.registerForm.get("confirm").setValidators([o.kI.required,this.passConfValidator.validateConfirmPassword(this.registerForm.get("password"))])}}return e.\u0275fac=function(i){return new(i||e)(r.Y36(p.$),r.Y36(h),r.Y36(d.F0))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-register-user"]],decls:41,vars:6,consts:[[1,"card",2,"max-width","800px","margin-left","400px"],[1,"card-body"],[1,"card-title"],["class","alert alert-danger","role","alert",4,"ngIf"],["autocomplete","off","novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3","row"],["for","firstName",1,"col-form-label","col-sm-2"],[1,"col-md-10"],["type","text","id","firstName","formControlName","firstName",1,"form-control"],["for","lastName",1,"col-form-label","col-sm-2"],["type","text","id","lastName","formControlName","lastName",1,"form-control"],["for","email",1,"col-form-label","col-sm-2"],["type","email","id","email","formControlName","email",1,"form-control"],["for","password",1,"col-form-label","col-sm-2"],["type","password","id","password","formControlName","password",1,"form-control"],[4,"ngIf"],["for","confirm",1,"col-form-label","col-sm-2"],["type","password","id","confirm","formControlName","confirm",1,"form-control"],[1,"col-md-1"],["type","submit",1,"btn","btn-info",3,"disabled"],["role","alert",1,"alert","alert-danger"],[3,"innerHTML"]],template:function(i,t){1&i&&(r.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),r._uU(3,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),r.qZA(),r.YNc(4,v,2,1,"div",3),r.TgZ(5,"form",4),r.NdJ("ngSubmit",function(){return t.registerUser(t.registerForm.value)}),r.TgZ(6,"div",5)(7,"label",6),r._uU(8,"\u0418\u043c\u044f (\u041b\u043e\u0433\u0438\u043d):"),r.qZA(),r.TgZ(9,"div",7),r._UZ(10,"input",8),r.qZA()(),r.TgZ(11,"div",5)(12,"label",9),r._uU(13,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f:"),r.qZA(),r.TgZ(14,"div",7),r._UZ(15,"input",10),r.qZA()(),r.TgZ(16,"div",5)(17,"label",11),r._uU(18,"Email:"),r.qZA(),r.TgZ(19,"div",7),r._UZ(20,"input",12),r.qZA()(),r.TgZ(21,"div",5)(22,"label",13),r._uU(23,"\u041f\u0430\u0440\u043e\u043b\u044c:"),r.qZA(),r.TgZ(24,"div",7),r._UZ(25,"input",14),r.qZA(),r.TgZ(26,"div",7),r.YNc(27,Z,2,0,"em",15),r.qZA()(),r.TgZ(28,"div",5)(29,"label",16),r._uU(30,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c:"),r.qZA(),r.TgZ(31,"div",7),r._UZ(32,"input",17),r.qZA(),r.TgZ(33,"div",7),r.YNc(34,w,2,0,"em",15),r.YNc(35,C,2,0,"em",15),r.qZA()(),r._UZ(36,"br"),r.TgZ(37,"div",5)(38,"div",18)(39,"button",19),r._uU(40,"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),r.qZA()()()()()()),2&i&&(r.xp6(4),r.Q6J("ngIf",t.showError),r.xp6(1),r.Q6J("formGroup",t.registerForm),r.xp6(22),r.Q6J("ngIf",t.validateControl("password")&&t.hasError("password","required")),r.xp6(7),r.Q6J("ngIf",t.validateControl("confirm")&&t.hasError("confirm","required")),r.xp6(1),r.Q6J("ngIf",t.hasError("confirm","mustMatch")),r.xp6(4),r.Q6J("disabled",!t.registerForm.valid))},directives:[c.O5,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u],styles:[""]}),e})();function T(e,s){if(1&e&&(r.TgZ(0,"div",14),r._uU(1),r.qZA()),2&e){const i=r.oxw();r.xp6(1),r.hij(" ",i.errorMessage," ")}}function A(e,s){1&e&&(r.TgZ(0,"em"),r._uU(1,"Username is required"),r.qZA())}function _(e,s){1&e&&(r.TgZ(0,"em"),r._uU(1,"Password is required"),r.qZA())}let b=(()=>{class e{constructor(i,t,u){this.authService=i,this.router=t,this.route=u,this.errorMessage="",this.validateControl=n=>this.loginForm.get(n).invalid&&this.loginForm.get(n).touched,this.hasError=(n,a)=>this.loginForm.get(n).hasError(a),this.loginUser=n=>{this.showError=!1;const a={...n};this.authService.loginUser("api/Accounts/Login",{name:a.username,password:a.password}).subscribe({next:l=>{localStorage.setItem("token",l.token),localStorage.setItem("userName",l.username),this.authService.sendAuthStateChangeNotification(l.isAuthSuccessful),this.router.navigate([this.returnUrl])},error:l=>{this.errorMessage=l.message,this.showError=!0}})}}ngOnInit(){this.loginForm=new o.cw({username:new o.NI("",[o.kI.required]),password:new o.NI("",[o.kI.required])}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}}return e.\u0275fac=function(i){return new(i||e)(r.Y36(p.$),r.Y36(d.F0),r.Y36(d.gz))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-login"]],decls:25,vars:5,consts:[[1,"card",2,"max-width","500px","margin-left","500px"],[1,"card-body"],[1,"card-title"],["class","alert alert-danger","role","alert",4,"ngIf"],["autocomplete","off","novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3","row"],["for","username",1,"col-form-label","col-sm-2"],[1,"col-md-10"],["type","text","id","username","formControlName","username",1,"form-control"],[4,"ngIf"],["for","password",1,"col-form-label","col-sm-2"],["type","password","id","password","formControlName","password",1,"form-control"],[1,"col-md-1"],["type","submit",1,"btn","btn-info",3,"disabled"],["role","alert",1,"alert","alert-danger"]],template:function(i,t){1&i&&(r.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),r._uU(3,"Login "),r.qZA(),r.YNc(4,T,2,1,"div",3),r.TgZ(5,"form",4),r.NdJ("ngSubmit",function(){return t.loginUser(t.loginForm.value)}),r.TgZ(6,"div",5)(7,"label",6),r._uU(8,"\u041b\u043e\u0433\u0438\u043d:"),r.qZA(),r.TgZ(9,"div",7),r._UZ(10,"input",8),r.qZA(),r.TgZ(11,"div",7),r.YNc(12,A,2,0,"em",9),r.qZA()(),r.TgZ(13,"div",5)(14,"label",10),r._uU(15,"\u041f\u0430\u0440\u043e\u043b\u044c:"),r.qZA(),r.TgZ(16,"div",7),r._UZ(17,"input",11),r.qZA(),r.TgZ(18,"div",7),r.YNc(19,_,2,0,"em",9),r.qZA()(),r._UZ(20,"br"),r.TgZ(21,"div",5)(22,"div",12)(23,"button",13),r._uU(24,"Login"),r.qZA()()()()()()),2&i&&(r.xp6(4),r.Q6J("ngIf",t.showError),r.xp6(1),r.Q6J("formGroup",t.loginForm),r.xp6(7),r.Q6J("ngIf",t.validateControl("username")&&t.hasError("username","required")),r.xp6(7),r.Q6J("ngIf",t.validateControl("password")&&t.hasError("password","required")),r.xp6(4),r.Q6J("disabled",!t.loginForm.valid))},directives:[c.O5,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u],styles:[""]}),e})(),q=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[c.ez,o.UX,d.Bz.forChild([{path:"register",component:U},{path:"login",component:b}])]]}),e})()}}]);