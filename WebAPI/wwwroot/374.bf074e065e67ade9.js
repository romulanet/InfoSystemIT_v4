"use strict";(self.webpackChunkAccountOwnerClient=self.webpackChunkAccountOwnerClient||[]).push([[374],{3374:(N,f,m)=>{m.r(f),m.d(f,{AuthenticationModule:()=>q});var c=m(6895),d=m(8252),o=m(4006),e=m(4650),p=m(7361);let h=(()=>{class r{constructor(){this.validateConfirmPassword=i=>t=>{const u=t.value;if(""!==u)return u!==i.value?{mustMatch:!0}:null}}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function v(r,s){if(1&r&&(e.TgZ(0,"div",20),e._UZ(1,"span",21),e.qZA()),2&r){const i=e.oxw();e.xp6(1),e.Q6J("innerHTML",i.errorMessage,e.oJD)}}function Z(r,s){1&r&&(e.TgZ(0,"em"),e._uU(1,"2"),e.qZA())}function w(r,s){1&r&&(e.TgZ(0,"em"),e._uU(1,"1"),e.qZA())}function C(r,s){1&r&&(e.TgZ(0,"em"),e._uU(1,"Passwords must match"),e.qZA())}let U=(()=>{class r{constructor(i,t,u){this.authService=i,this.passConfValidator=t,this.router=u,this.errorMessage="",this.validateControl=n=>this.registerForm.get(n).invalid&&this.registerForm.get(n).touched,this.hasError=(n,a)=>this.registerForm.get(n).hasError(a),this.registerUser=n=>{this.showError=!1;const a={...n};this.authService.registerUser("api/Accounts/Registration",{firstName:a.firstName,lastName:a.lastName,email:a.email,password:a.password,confirmPassword:a.confirm}).subscribe({next:l=>this.router.navigate(["/authentication/login"]),error:l=>{this.errorMessage=l.message,this.showError=!0}}),this.authService.logout()}}ngOnInit(){this.registerForm=new o.cw({firstName:new o.NI("",[o.kI.required]),lastName:new o.NI(""),email:new o.NI(""),password:new o.NI("",[o.kI.required]),confirm:new o.NI("")}),this.registerForm.get("confirm").setValidators([o.kI.required,this.passConfValidator.validateConfirmPassword(this.registerForm.get("password"))])}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(p.$),e.Y36(h),e.Y36(d.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-register-user"]],decls:41,vars:6,consts:[[1,"card",2,"max-width","800px","margin-left","400px"],[1,"card-body"],[1,"card-title"],["class","alert alert-danger","role","alert",4,"ngIf"],["autocomplete","off","novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3","row"],["for","firstName",1,"col-form-label","col-sm-2"],[1,"col-md-10"],["type","text","id","firstName","formControlName","firstName",1,"form-control"],["for","lastName",1,"col-form-label","col-sm-2"],["type","text","id","lastName","formControlName","lastName",1,"form-control"],["for","email",1,"col-form-label","col-sm-2"],["type","email","id","email","formControlName","email",1,"form-control"],["for","password",1,"col-form-label","col-sm-2"],["type","password","id","password","formControlName","password",1,"form-control"],[4,"ngIf"],["for","confirm",1,"col-form-label","col-sm-2"],["type","password","id","confirm","formControlName","confirm",1,"form-control"],[1,"col-md-1"],["type","submit",1,"btn","btn-info",3,"disabled"],["role","alert",1,"alert","alert-danger"],[3,"innerHTML"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),e.qZA(),e.YNc(4,v,2,1,"div",3),e.TgZ(5,"form",4),e.NdJ("ngSubmit",function(){return t.registerUser(t.registerForm.value)}),e.TgZ(6,"div",5)(7,"label",6),e._uU(8,"\u0418\u043c\u044f (\u041b\u043e\u0433\u0438\u043d):"),e.qZA(),e.TgZ(9,"div",7),e._UZ(10,"input",8),e.qZA()(),e.TgZ(11,"div",5)(12,"label",9),e._uU(13,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f:"),e.qZA(),e.TgZ(14,"div",7),e._UZ(15,"input",10),e.qZA()(),e.TgZ(16,"div",5)(17,"label",11),e._uU(18,"Email:"),e.qZA(),e.TgZ(19,"div",7),e._UZ(20,"input",12),e.qZA()(),e.TgZ(21,"div",5)(22,"label",13),e._uU(23,"\u041f\u0430\u0440\u043e\u043b\u044c:"),e.qZA(),e.TgZ(24,"div",7),e._UZ(25,"input",14),e.qZA(),e.TgZ(26,"div",7),e.YNc(27,Z,2,0,"em",15),e.qZA()(),e.TgZ(28,"div",5)(29,"label",16),e._uU(30,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c:"),e.qZA(),e.TgZ(31,"div",7),e._UZ(32,"input",17),e.qZA(),e.TgZ(33,"div",7),e.YNc(34,w,2,0,"em",15),e.YNc(35,C,2,0,"em",15),e.qZA()(),e._UZ(36,"br"),e.TgZ(37,"div",5)(38,"div",18)(39,"button",19),e._uU(40,"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),e.qZA()()()()()()),2&i&&(e.xp6(4),e.Q6J("ngIf",t.showError),e.xp6(1),e.Q6J("formGroup",t.registerForm),e.xp6(22),e.Q6J("ngIf",t.validateControl("password")&&t.hasError("password","required")),e.xp6(7),e.Q6J("ngIf",t.validateControl("confirm")&&t.hasError("confirm","required")),e.xp6(1),e.Q6J("ngIf",t.hasError("confirm","mustMatch")),e.xp6(4),e.Q6J("disabled",!t.registerForm.valid))},directives:[c.O5,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u],styles:[""]}),r})();function T(r,s){if(1&r&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&r){const i=e.oxw();e.xp6(1),e.hij(" ",i.errorMessage," ")}}function A(r,s){1&r&&(e.TgZ(0,"em"),e._uU(1,"Username is required"),e.qZA())}function _(r,s){1&r&&(e.TgZ(0,"em"),e._uU(1,"Password is required"),e.qZA())}let b=(()=>{class r{constructor(i,t,u){this.authService=i,this.router=t,this.route=u,this.errorMessage="",this.validateControl=n=>this.loginForm.get(n).invalid&&this.loginForm.get(n).touched,this.hasError=(n,a)=>this.loginForm.get(n).hasError(a),this.loginUser=n=>{this.showError=!1;const a={...n};this.authService.loginUser("api/Accounts/Login",{name:a.username,password:a.password}).subscribe({next:l=>{localStorage.setItem("token",l.token),localStorage.setItem("userName",l.username),this.authService.sendAuthStateChangeNotification(l.isAuthSuccessful),this.router.navigate([this.returnUrl])},error:l=>{this.errorMessage=l.message,this.showError=!0}})}}ngOnInit(){this.loginForm=new o.cw({username:new o.NI("",[o.kI.required]),password:new o.NI("",[o.kI.required])}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}}return r.\u0275fac=function(i){return new(i||r)(e.Y36(p.$),e.Y36(d.F0),e.Y36(d.gz))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-login"]],decls:25,vars:5,consts:[[1,"card",2,"max-width","500px","margin-left","500px"],[1,"card-body"],[1,"card-title"],["class","alert alert-danger","role","alert",4,"ngIf"],["autocomplete","off","novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3","row"],["for","username",1,"col-form-label","col-sm-2"],[1,"col-md-10"],["type","text","placeholder","admin","id","username","formControlName","username",1,"form-control"],[4,"ngIf"],["for","password",1,"col-form-label","col-sm-2"],["type","password","placeholder","admin","id","password","formControlName","password",1,"form-control"],[1,"col-md-1"],["type","submit",1,"btn","btn-info",3,"disabled"],["role","alert",1,"alert","alert-danger"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"Login "),e.qZA(),e.YNc(4,T,2,1,"div",3),e.TgZ(5,"form",4),e.NdJ("ngSubmit",function(){return t.loginUser(t.loginForm.value)}),e.TgZ(6,"div",5)(7,"label",6),e._uU(8,"\u041b\u043e\u0433\u0438\u043d:"),e.qZA(),e.TgZ(9,"div",7),e._UZ(10,"input",8),e.qZA(),e.TgZ(11,"div",7),e.YNc(12,A,2,0,"em",9),e.qZA()(),e.TgZ(13,"div",5)(14,"label",10),e._uU(15,"\u041f\u0430\u0440\u043e\u043b\u044c:"),e.qZA(),e.TgZ(16,"div",7),e._UZ(17,"input",11),e.qZA(),e.TgZ(18,"div",7),e.YNc(19,_,2,0,"em",9),e.qZA()(),e._UZ(20,"br"),e.TgZ(21,"div",5)(22,"div",12)(23,"button",13),e._uU(24,"Login"),e.qZA()()()()()()),2&i&&(e.xp6(4),e.Q6J("ngIf",t.showError),e.xp6(1),e.Q6J("formGroup",t.loginForm),e.xp6(7),e.Q6J("ngIf",t.validateControl("username")&&t.hasError("username","required")),e.xp6(7),e.Q6J("ngIf",t.validateControl("password")&&t.hasError("password","required")),e.xp6(4),e.Q6J("disabled",!t.loginForm.valid))},directives:[c.O5,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u],styles:[""]}),r})(),q=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[c.ez,o.UX,d.Bz.forChild([{path:"register",component:U},{path:"login",component:b}])]]}),r})()}}]);